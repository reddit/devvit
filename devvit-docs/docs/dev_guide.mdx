import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Building an app

This guide explains how to build, test, and publish an app in 10 easy steps.

:::note
If you just want to dive into the code, check out the [quickstart](quickstart.mdx).
:::

## 1. Environment setup

Make sure you have the following software installed:

- Node.js v22.2.0 or higher
- Git v2.28.0 or higher

You'll also need an editor for viewing and editing code (we recommend [VS Code](https://code.visualstudio.com/)).

<details>
  <summary>Click here for instructions on installing Node.js</summary>
  <div>
    <div>
    You’re going to work with TypeScript. In order for Typescript to work with Devvit, you’ll need a working Node.js environment and then the Devvit command line interface. Node.js is an open-source server environment that makes it possible to develop and run Javascript apps anywhere. Node.js lets you import and use packages (code that other people have written) into your code.

**Option 1: Use node version manager (nvm)**

Install or update [nvm](https://github.com/nvm-sh/nvm#installing-and-updating) to use as a handy command-line tool for managing multiple Node.js versions on your system. This will allow you to switch between different versions easily. If you to use a different node version manager, check out these [suggestions from npmjs.org](https://docs.npmjs.com/downloading-and-installing-node-js-and-npm).

For macOS or Linux:

1. Run the following command line in your terminal to install nvm.

```bash
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.6/install.sh | bash
```

2. Close and re-open your terminal to have nvm available.

3. Install the latest version of Node.js.

```bash
nvm install node
```

For Windows:

1. Download and install nvm-windows by following the instructions in the repository.

2. Restart your terminal or command prompt.

3. Install the latest version of Node.js.

```bash
nvm install node
```

**Option 2: Use Node.js installer from nodejs.org**

1. Visit the official [Node.js website](https://nodejs.org) to download the installer for your operating system (Windows, macOS, or Linux).
2. Run the installer and follow the prompts to install Node.js and npm (the package manager for Node.js).

:::note
If you install Node.js this way, you may experience permissions issues when trying to run Devvit, which is [documented on NPM's website](https://docs.npmjs.com/downloading-and-installing-node-js-and-npm). Both NPM and us here at Reddit highly encourage you to use nvm if possible. If that's not possible, here are some tips on how to [fix these permissions issues](https://docs.npmjs.com/downloading-and-installing-node-js-and-npm). For Windows users specifically, please use a node version manager.
:::

Check that Node.js is installed correctly by running the following commands:

```bash
node --version
npm --version
```

You should see the version numbers for Node.js and npm as output.

</div>
    <br/>
  </div>
</details>

## 2. Install Devvit

To download and install the Devvit CLI, run one of the following commands:

<Tabs>
  <TabItem value="npm" label="npm" default>
    ```bash $ npm install -g devvit ```
  </TabItem>
  <TabItem value="yarn" label="Yarn">
    ```bash $ yarn global add devvit ```
  </TabItem>
  <TabItem value="pnpm" label="pnpm" default>
    ```bash $ pnpm add -g devvit ```
  </TabItem>
</Tabs>

## 3. Log in

Log in to devvit using the Reddit account that has been allowlisted for the Developer Platform.

```bash
devvit login
```

You’ll be prompted to open an authorization page in your browser to allow the Devvit CLI to connect with your Reddit account. Click **Allow** to complete the login process.

## 4. Make a project

Pick a project name that is six or more characters, all lowercase, using kebab-case. Your project name must start with a letter and can include the numbers 0 - 9. Use the following command to make your project:

```bash
$ devvit new <my-project>
```

## 5. Choose a template

Next you’ll be prompted to select a [template](./templates.mdx). Select `experience-post`.

```text
$ devvit new my-project
? Choose a template: (Use arrow keys)
  app-settings
  empty
❯ experience-post
  experience-post-pro
  forms
  image-uploads
(Move up and down to reveal more choices)
```

This creates a full directory for your project. The `src/main.tsx` file contains the main code for your app.

```text
my-project
├── devvit.yaml
├── package.json
├── src
│   └── main.tsx
├── tsconfig.json
```

## 6. Start coding

Navigate to your new folder:

```bash
$ cd <my-project>
```

The `main.tsx` file contains the main code for your app. The template you selected has all the code you need to
create a complete experience post that counts clicks. You can make and save changes or upload the app as is to try it out.

## 7. Upload your app

To test your app, upload it to the [Apps](https://developers.reddit.com/) directory. This creates a private version of your app that only you can see.

From your project directory, run:

```tsx
$ devvit upload
```

You’ll be prompted to do three things:

- Pick a name for your app (app names must be unique, between 3-16 characters, all lowercase, can't start with numerals, and include only a-z, 0-9 or '-'.).
- Indicate if your app is Not Safe For Work (NSFW).
- Copy the CAPTCHA link into a browser window and verify that you’re human.

Once you’re done, you’ll see this:

```tsx
Creating app...... Successfully created your app in Reddit!
Automatically bumped app version to: 0.0.1
```

## 8. Playtest

Playtest lets you test your app while it’s still in development. You can install your app on a subreddit you moderate that has less than 200 subscribers.

From your project directory, run:

```tsx
$ devvit playtest <test-subreddit-name>
```

Go to your subreddit and select the three-dot menu next to the **Mod Tools** button. Click on the **Add my post** to open
your app in your feed (you might need to refresh the page).

Playtest automatically builds and deploys your app every time you save your code, so you can edit and save your code to see the results in realtime.
Refresh the page to view the latest changes. Check out the developer tools section for more [playtest features](playtest.md).

To end the playtest, press Ctrl + c.

## 9. Publish

Publishing your app will put it into an unlisted state in the [Apps](https://developers.reddit.com/) directory. This means that only you can see your app.

From your project directory, run:

```tsx
devvit publish
```

Once you’ve published your app, you can install it on larger subreddits that you moderate. Some things to note:

- Your app is still only visible to you in the Apps directory.
- You can install the app on subreddits with more than 100 subscribers.
- The app will automatically be reviewed by the Developer Platform team.

:::note
[Experience](experience_post.md) apps or NSFW apps must go through the review process before they can be published. Apps that use http fetch must provide terms & conditions and a privacy policy before they can be published.
:::

## 10. Go public

If you want your app to be publicly listed in the [Apps](https://developers.reddit.com/) directory, you’ll need to submit an [app review form](https://docs.google.com/forms/d/e/1FAIpQLSdEyE5vrqOBlojue_mkrV25RiiHv_sxe-xqtcdzCMBTWmoROA/viewform). Once approved, your app will be publicly listed for everyone to see, and it can be installed by any mod in any subreddit.
